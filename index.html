<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game Ti·∫øng Anh 8 - Vui Xu√¢n ƒê√≥n T·∫øt</title>
  <link href="https://fonts.googleapis.com/css2?family=Pangolin&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { --red:#d63031; --yellow:#fdcb6e; --cream:#fff8e1; --text:#2d3436; --green:#00b894; }
    body{
      margin:0; font-family:'Nunito',sans-serif;
      background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 99%,#fad0c4 100%);
      height:100vh; display:flex; justify-content:center; align-items:center;
      overflow:hidden; user-select:none;
    }

    .flower{ position:fixed; top:-10%; z-index:1; pointer-events:none; animation:fall linear infinite; font-size:1.5rem; }
    @keyframes fall{ 0%{transform:translateY(-10vh) rotate(0deg); opacity:1} 100%{transform:translateY(110vh) rotate(360deg); opacity:.7} }

    #start-screen{
      position:fixed; inset:0;
      background:rgba(255,255,255,.98);
      z-index:10000;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center;
    }
    #start-btn{
      background:var(--red); color:#fff;
      border:4px solid var(--yellow);
      padding:20px 60px;
      font-family:'Pangolin',cursive;
      font-size:2.5rem;
      border-radius:50px;
      cursor:pointer;
      margin-top:30px;
      box-shadow:0 10px 25px rgba(214,48,49,.4);
      animation:pulse 1.5s infinite;
      transition:transform .2s;
    }
    #start-btn:hover{ transform:scale(1.05); }
    @keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }

    .game-container{
      position:relative; z-index:10;
      background:rgba(255,255,255,.95);
      width:95%; max-width:900px; height:90vh;
      border-radius:25px;
      border:5px solid var(--red);
      box-shadow:0 0 40px rgba(255,107,107,.3);
      display:flex; flex-direction:column;
      padding:20px;
    }
    .header{ text-align:center; border-bottom:2px dashed var(--yellow); padding-bottom:10px; margin-bottom:10px; }
    h1{ margin:0; color:var(--red); font-family:'Pangolin',cursive; font-size:2.5rem; text-shadow:1px 1px 0 #fff; }
    .stats{ display:flex; justify-content:space-between; font-weight:700; color:#e17055; font-size:1.1rem; }
    .content-area{ flex:1; overflow-y:auto; padding-right:10px; }

    .passage-box{
      background:var(--cream); padding:15px; border-radius:10px;
      border-left:5px solid var(--yellow); margin-bottom:15px;
      display:none; line-height:1.6; font-size:1rem; color:#444;
    }
    .question{ font-size:1.25rem; font-weight:800; margin-bottom:20px; color:var(--text); }
    .options{ display:grid; grid-template-columns:1fr 1fr; gap:15px; }
    .opt-btn{
      background:#fff; border:2px solid #ffeaa7;
      padding:15px; border-radius:15px; cursor:pointer;
      font-size:1rem; color:#636e72; transition:.2s;
      font-weight:800; text-align:left;
      box-shadow:0 3px 0 #ffeaa7;
    }
    .opt-btn:active{ transform:translateY(3px); box-shadow:none; }
    .opt-btn:hover{ background:#fffce3; border-color:var(--yellow); }
    .opt-btn.correct{ background:#55efc4; color:#006266; border-color:#00b894; box-shadow:0 3px 0 #00b894; }
    .opt-btn.wrong{ background:#ff7675; color:#fff; border-color:#d63031; box-shadow:0 3px 0 #d63031; }
    .opt-btn.disabled{ pointer-events:none; opacity:.85; }

    .feedback{
      margin-top:15px; padding:15px; border-radius:15px;
      display:none; background:#fff; border:1px solid #dfe6e9;
      animation:slideUp .3s;
    }
    @keyframes slideUp{ from{transform:translateY(20px);opacity:0} to{transform:translateY(0);opacity:1} }

    .controls{
      margin-top:10px; border-top:2px dashed var(--yellow);
      padding-top:10px; display:flex; justify-content:space-between; align-items:center;
    }
    .music-btn{
      background:#fff; border:2px solid #ddd; border-radius:50%;
      width:45px; height:45px; cursor:pointer; font-size:1.5rem;
      display:flex; justify-content:center; align-items:center;
      transition:.3s;
    }
    .music-playing{ background:var(--red); color:#fff; border-color:var(--red); animation:spin 4s linear infinite; }
    @keyframes spin{ 100%{ transform:rotate(360deg); } }

    .next-btn{
      background:var(--yellow); color:#d35400; border:none;
      padding:10px 30px; border-radius:30px; font-weight:900;
      font-size:1.2rem; cursor:pointer; display:none;
      box-shadow:0 4px 0 #e67e22; font-family:'Pangolin',cursive;
    }
    .next-btn:active{ transform:translateY(4px); box-shadow:none; }

    @media (max-width:600px){
      .options{ grid-template-columns:1fr; }
      #start-btn{ font-size:1.8rem; padding:15px 40px; }
      h1{ font-size:1.8rem; }
      .game-container{ padding:15px; }
    }
  </style>
</head>
<body>

  <div id="start-screen">
    <h1 style="color: var(--red); font-size: 3.5rem; text-shadow: 2px 2px 0 var(--yellow);">üå∏ KHAI B√öT ƒê·∫¶U XU√ÇN üå∏</h1>
    <p style="font-size: 1.2rem; color: #555; margin-top: 10px;">100 C√¢u H·ªèi √în T·∫≠p Unit 7 - 8 - 9</p>
    <button id="start-btn">üßß B·∫ÆT ƒê·∫¶U üßß</button>
    <p style="margin-top: 20px; color: #888; font-size: 0.9rem;">(Nh·∫°c n·ªÅn s·∫Ω ph√°t sau khi b·∫•m B·∫ÆT ƒê·∫¶U)</p>
  </div>

  <div id="flower-container"></div>

  <div class="game-container">
    <div class="header">
      <h1>üåº Happy New Year üåº</h1>
      <div class="stats">
        <span>C√¢u: <span id="lbl-q">1</span>/<span id="lbl-total">100</span></span>
        <span>ƒêi·ªÉm: <span id="lbl-score">0</span></span>
      </div>
    </div>

    <div class="content-area">
      <div id="passage" class="passage-box"></div>
      <div id="question" class="question"></div>
      <div id="options" class="options"></div>

      <div id="feedback" class="feedback">
        <div id="fb-msg" style="font-weight: bold; font-size: 1.1rem; margin-bottom: 5px;"></div>
        <div id="fb-exp" style="color: #333; font-size: 0.95rem;"></div>
        <div id="fb-trans" style="font-style: italic; color: #666; margin-top: 5px; border-top: 1px solid #eee; padding-top: 5px; font-size: 0.9rem;"></div>
      </div>
    </div>

    <div class="controls">
      <button class="music-btn" id="btn-music" title="B·∫≠t/T·∫Øt nh·∫°c">üéµ</button>
      <button id="btn-next" class="next-btn">C√¢u Ti·∫øp Theo ‚ûú</button>
    </div>
  </div>

  <script>
    // =========================
    // 1) DATA (GI·ªÆ NGUY√äN 100 C√ÇU C·ª¶A B·∫†N)
    // =========================
    const questions = [
      // UNIT 7: POLLUTION (1-30)
      {q:"If the water is contaminated, people ______ more diseases.",o:["get","will get","would get","got"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1: If + S + V(s/es), S + will + V.",t:"N·∫øu n∆∞·ªõc b·ªã √¥ nhi·ªÖm, m·ªçi ng∆∞·ªùi s·∫Ω m·∫Øc nhi·ªÅu b·ªánh h∆°n."},
      {q:"The street doesn't look ______ because it has a lot of rubbish.",o:["attract","attractive","attraction","attractively"],a:1,e:"Sau ƒë·ªông t·ª´ li√™n k·∫øt 'look' l√† t√≠nh t·ª´.",t:"Con ph·ªë tr√¥ng kh√¥ng h·∫•p d·∫´n v√¨ c√≥ nhi·ªÅu r√°c."},
      {q:"Identify the mistake: 'Because the heavy rain, the meeting was delayed.'",o:["Because","heavy rain","was","delayed"],a:0,e:"Sau Because l√† m·ªánh ƒë·ªÅ. C·ª•m danh t·ª´ 'the heavy rain' ph·∫£i d√πng 'Because of'.",t:"L·ªói sai: Because -> Because of."},
      {q:"Pronunciation: A. pollution, B. question, C. action, D. attraction",o:["pollution","question","action","attraction"],a:1,e:"B. question (/t É…ôn/). C√°c t·ª´ c√≤n l·∫°i / É…ôn/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"If I ______ you, I would ride a bike instead of a motorbike.",o:["am","were","will be","be"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 2 (l·ªùi khuy√™n): If I were you.",t:"N·∫øu t√¥i l√† b·∫°n, t√¥i s·∫Ω ƒëi xe ƒë·∫°p."},
      {q:"Rewrite: 'Jimmy ate a lot of fast food, so he put on 10kg.' -> Because ______.",o:["Jimmy ate a lot, he put on 10kg.","Jimmy put on 10kg, he ate a lot.","he put on 10kg, Jimmy ate a lot.","of eating a lot, he put on 10kg."],a:0,e:"Because + Nguy√™n nh√¢n -> K·∫øt qu·∫£.",t:"V√¨ Jimmy ƒÉn nhi·ªÅu n√™n anh ·∫•y tƒÉng c√¢n."},
      {q:"Light pollution happens when there is too much ______ in the city at night.",o:["noise","water","artificial light","gas"],a:2,e:"Artificial light (√°nh s√°ng nh√¢n t·∫°o).",t:"√î nhi·ªÖm √°nh s√°ng do qu√° nhi·ªÅu √°nh s√°ng nh√¢n t·∫°o."},
      {q:"If we ______ cutting down trees, we will destroy the forests.",o:["continue","continued","will continue","are continuing"],a:0,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1.",t:"N·∫øu ti·∫øp t·ª•c ch·∫∑t c√¢y, ta s·∫Ω ph√° h·ªßy r·ª´ng."},
      {q:"Find the mistake: 'I am a member of the club, because I go to meetings twice a week.'",o:["am","of","because","twice"],a:2,e:"Ng·ªØ c·∫£nh n√†y d√πng 'so' (k·∫øt qu·∫£) h·ª£p l√Ω h∆°n: T√¥i l√† th√†nh vi√™n N√äN t√¥i ƒëi h·ªçp.",t:"L·ªói sai t·ª´ n·ªëi."},
      {q:"Water pollution can lead to the death of ______ animals.",o:["land","aquatic","flying","desert"],a:1,e:"Aquatic (th·ªßy sinh).",t:"√î nhi·ªÖm n∆∞·ªõc l√†m ch·∫øt ƒë·ªông v·∫≠t th·ªßy sinh."},
      {q:"Unless we ______ plastic bags, the environment will be polluted.",o:["use","don't use","reduce","don't reduce"],a:2,e:"Unless = If... not. (Tr·ª´ khi ch√∫ng ta gi·∫£m d√πng t√∫i nh·ª±a...)",t:"Tr·ª´ khi gi·∫£m d√πng t√∫i nh·ª±a, m√¥i tr∆∞·ªùng s·∫Ω b·ªã √¥ nhi·ªÖm."},
      {q:"Acid rain can lead ______ skin cancer.",o:["of","to","in","from"],a:1,e:"Lead to (d·∫´n ƒë·∫øn).",t:"M∆∞a axit c√≥ th·ªÉ d·∫´n ƒë·∫øn ung th∆∞ da."},
      {q:"People suffer from noise pollution if they ______ near an airport.",o:["live","lived","will live","living"],a:0,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1.",t:"M·ªçi ng∆∞·ªùi ch·ªãu ti·∫øng ·ªìn n·∫øu s·ªëng g·∫ßn s√¢n bay."},
      {q:"Rewrite: 'Why don't we recycle bottles?' -> ______.",o:["We must recycle bottles.","Shall we recycle bottles?","What do we recycle for?","How to recycle?"],a:1,e:"'Why don't we' = 'Shall we'.",t:"Ta h√£y t√°i ch·∫ø chai l·ªç nh√©?"},
      {q:"Reading: What causes air pollution in cities?",o:["Trees","Factories and vehicles","Rivers","Rain"],a:1,p:"Motor vehicles and factories create so much air pollution...",e:"Xe c·ªô v√† nh√† m√°y.",t:"C√°i g√¨ g√¢y √¥ nhi·ªÖm kh√¥ng kh√≠?"},
      {q:"If people ______ digging the street, there wouldn't be noise pollution.",o:["stop","stopped","will stop","had stopped"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 2 (gi·∫£ ƒë·ªãnh). If + V2/ed.",t:"N·∫øu ng∆∞·ªùi ta ng·ª´ng ƒë√†o ƒë∆∞·ªùng, s·∫Ω kh√¥ng c√≥ ti·∫øng ·ªìn."},
      {q:"Visual pollution includes ______.",o:["loud music","billboards and overhead power lines","dirty water","chemicals"],a:1,e:"√î nhi·ªÖm t·∫ßm nh√¨n (bi·ªÉn qu·∫£ng c√°o, d√¢y ƒëi·ªán...).",t:"√î nhi·ªÖm t·∫ßm nh√¨n bao g·ªìm bi·ªÉn b√°o v√† d√¢y ƒëi·ªán."},
      {q:"If you ______ the president, what would you do?",o:["are","were","will be","have been"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 2.",t:"N·∫øu b·∫°n l√† t·ªïng th·ªëng, b·∫°n s·∫Ω l√†m g√¨?"},
      {q:"Rewrite: 'Unless you study, you will fail.' -> If ______.",o:["you don't study, you will fail.","you study, you will fail.","you didn't study, you would fail.","you study, you won't fail."],a:0,e:"Unless = If not.",t:"N·∫øu b·∫°n kh√¥ng h·ªçc, b·∫°n s·∫Ω tr∆∞·ª£t."},
      {q:"The river is polluted ______ waste from the factory.",o:["because","because of","although","despite"],a:1,e:"Because of + Noun Phrase (waste).",t:"S√¥ng √¥ nhi·ªÖm v√¨ r√°c th·∫£i."},
      {q:"Don't drink that water. It's ______.",o:["pure","fresh","contaminated","clean"],a:2,e:"Contaminated (b·ªã √¥ nhi·ªÖm/b·∫©n).",t:"ƒê·ª´ng u·ªëng, n∆∞·ªõc b·ªã √¥ nhi·ªÖm r·ªìi."},
      {q:"If the sun ______, we will go for a walk.",o:["shine","shines","shone","shining"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1. Sun s·ªë √≠t -> shines.",t:"N·∫øu tr·ªùi n·∫Øng, ta s·∫Ω ƒëi d·∫°o."},
      {q:"Many fish died ______ the water pollution.",o:["so","because","due to","since"],a:2,e:"Due to + Noun Phrase.",t:"Nhi·ªÅu c√° ch·∫øt do √¥ nhi·ªÖm n∆∞·ªõc."},
      {q:"Poisonous ______ from factories pollute the air.",o:["fumes","sounds","water","trash"],a:0,e:"Fumes (kh√≥i b·ª•i/kh√≠ th·∫£i).",t:"Kh√≠ th·∫£i ƒë·ªôc h·∫°i t·ª´ nh√† m√°y."},
      {q:"If we plant more trees, the air ______ fresher.",o:["is","will be","would be","was"],a:1,e:"C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1.",t:"N·∫øu tr·ªìng th√™m c√¢y, kh√¥ng kh√≠ s·∫Ω trong l√†nh h∆°n."},
      {q:"Find the mistake: 'If it will rain tomorrow, we stay at home.'",o:["will rain","tomorrow","stay","at"],a:0,e:"M·ªánh ƒë·ªÅ If kh√¥ng d√πng t∆∞∆°ng lai ƒë∆°n. -> rains.",t:"L·ªói sai: will rain."},
      {q:"Recycling is a good way to ______ the environment.",o:["damage","protect","pollute","harm"],a:1,e:"Protect (b·∫£o v·ªá).",t:"T√°i ch·∫ø l√† c√°ch t·ªët ƒë·ªÉ b·∫£o v·ªá m√¥i tr∆∞·ªùng."},
      {q:"Rewrite: 'The noise gives me a headache.' -> I get a headache ______.",o:["because the noise","because of the noise","so the noise","although the noise"],a:1,e:"Because of + Noun.",t:"T√¥i ƒëau ƒë·∫ßu v√¨ ti·∫øng ·ªìn."},
      {q:"We should replace normal bulbs with ______ bulbs.",o:["energy-wasting","energy-saving","light","heavy"],a:1,e:"Energy-saving (ti·∫øt ki·ªám nƒÉng l∆∞·ª£ng).",t:"N√™n thay b·∫±ng b√≥ng ƒë√®n ti·∫øt ki·ªám ƒëi·ªán."},
      {q:"Soil pollution affects ______.",o:["fish","birds","plants and trees","planes"],a:2,e:"√î nhi·ªÖm ƒë·∫•t ·∫£nh h∆∞·ªüng c√¢y c·ªëi.",t:"√î nhi·ªÖm ƒë·∫•t ·∫£nh h∆∞·ªüng ƒë·∫øn th·ª±c v·∫≠t."},

      // UNIT 8 (31-60)
      {q:"Which word has different stress pattern?",o:["schedule","coffee","active","Chinese"],a:3,e:"D. Chinese (2). C√≤n l·∫°i √¢m 1.",t:"Ch·ªçn t·ª´ c√≥ tr·ªçng √¢m kh√°c."},
      {q:"The flight to Australia ______ at 7:00 pm.",o:["depart","departs","is departing","will depart"],a:1,e:"L·ªãch tr√¨nh t√†u xe d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n.",t:"Chuy·∫øn bay ƒë·∫øn √öc kh·ªüi h√†nh l√∫c 7 gi·ªù t·ªëi."},
      {q:"Reading: A kiwi has ______.",o:["big wings","a long tail","no wings","feathers like other birds"],a:2,e:"Theo b√†i ƒë·ªçc Unit 8: Kiwi kh√¥ng c√≥ c√°nh.",t:"Chim Kiwi c√≥ ƒë·∫∑c ƒëi·ªÉm g√¨? -> Kh√¥ng c√°nh."},
      {q:"Reading: Where does the Kiwi live?",o:["Australia","New Zealand","USA","UK"],a:1,e:"B√†i ƒë·ªçc: Kiwi s·ªëng ·ªü New Zealand.",t:"Kiwi s·ªëng ·ªü ƒë√¢u? -> New Zealand."},
      {q:"Rewrite: 'We began eating when it started to rain.' -> We have ______.",o:["eaten since it started to rain","ate when it started to rain","eating since it started to rain","begun to eat when it rained"],a:0,e:"Chuy·ªÉn t·ª´ Qu√° kh·ª© sang Hi·ªán t·∫°i ho√†n th√†nh.",t:"Ch√∫ng t√¥i ƒë√£ ƒÉn t·ª´ khi tr·ªùi b·∫Øt ƒë·∫ßu m∆∞a."},
      {q:"Find the mistake: 'His skills improve a lot since his trip to Canada.'",o:["skills","improve","since","trip"],a:1,e:"C√≥ 'since' -> D√πng Hi·ªán t·∫°i ho√†n th√†nh (have improved).",t:"L·ªói sai: improve."},
      {q:"The official languages of Canada are ______.",o:["English and German","English and French","English and Spanish","French and Spanish"],a:1,e:"Ki·∫øn th·ª©c Unit 8: Anh v√† Ph√°p.",t:"Ng√¥n ng·ªØ ch√≠nh th·ª©c c·ªßa Canada l√† ti·∫øng Anh v√† ti·∫øng Ph√°p."},
      {q:"Look at the schedule: The History exam ______ on Friday.",o:["be","is","will be","being"],a:1,e:"L·ªãch tr√¨nh/Th·ªùi kh√≥a bi·ªÉu -> Hi·ªán t·∫°i ƒë∆°n.",t:"B√†i ki·ªÉm tra L·ªãch s·ª≠ di·ªÖn ra v√†o th·ª© S√°u."},
      {q:"People in ______ drive on the left side of the road.",o:["America","Vietnam","Australia","China"],a:2,e:"√öc (Australia) l√°i xe b√™n tr√°i.",t:"Ng∆∞·ªùi d√¢n ·ªü √öc l√°i xe b√™n tr√°i ƒë∆∞·ªùng."},
      {q:"Pronunciation: Choose the word pronounced differently.",o:["schedule","school","scenery","scheme"],a:2,e:"C. scenery (/s/). C√≤n l·∫°i /k/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"The Aborigines ______ in Australia for more than 40,000 years.",o:["lived","have lived","live","are living"],a:1,e:"Hi·ªán t·∫°i ho√†n th√†nh v·ªõi 'for...'.",t:"Th·ªï d√¢n ƒë√£ s·ªëng ·ªü √öc h∆°n 40.000 nƒÉm."},
      {q:"A koala ______ about 18-20 hours sleeping in tree forks.",o:["spends","spent","is spending","has spent"],a:0,e:"S·ª± th·∫≠t hi·ªÉn nhi√™n -> Hi·ªán t·∫°i ƒë∆°n.",t:"G·∫•u t√∫i d√†nh 18-20h ƒë·ªÉ ng·ªß."},
      {q:"Rewrite: 'This is the first time he went abroad.' -> He hasn't ______.",o:["gone abroad before","went abroad before","go abroad before","going abroad before"],a:0,e:"C·∫•u tr√∫c: hasn't + V3 (gone) + before.",t:"Anh ·∫•y ch∆∞a t·ª´ng ra n∆∞·ªõc ngo√†i tr∆∞·ªõc ƒë√¢y."},
      {q:"Which country is NOT an English-speaking country in Unit 8?",o:["USA","Vietnam","Australia","New Zealand"],a:1,e:"Vietnam n√≥i ti·∫øng Vi·ªát.",t:"N∆∞·ªõc n√†o kh√¥ng n√≥i ti·∫øng Anh b·∫£n ng·ªØ?"},
      {q:"Which country is famous for kangaroos?",o:["USA","Australia","UK","Canada"],a:1,e:"Chu·ªôt t√∫i l√† bi·ªÉu t∆∞·ª£ng c·ªßa √öc.",t:"N∆∞·ªõc n√†o n·ªïi ti·∫øng v·ªõi chu·ªôt t√∫i?"},
      {q:"The USA has ______ states.",o:["40","50","52","60"],a:1,e:"M·ªπ c√≥ 50 bang.",t:"M·ªπ c√≥ bao nhi√™u bang? -> 50."},
      {q:"Reading: What is the largest English speaking country?",o:["USA","UK","Canada","Australia"],a:0,p:"It is believed that there are around 230 million native speakers in the United States...",e:"Theo b√†i ƒë·ªçc: M·ªπ.",t:"N∆∞·ªõc n√≥i ti·∫øng Anh l·ªõn nh·∫•t?"},
      {q:"Pronunciation: A. puzzle, B. stunning, C. full, D. number",o:["puzzle","stunning","full","number"],a:2,e:"C. full (/u/). C√≤n l·∫°i / å/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"Rewrite: 'I started learning English 5 years ago.' -> I have ______.",o:["learn English for 5 years","learnt English for 5 years","learning English for 5 years","learnt English since 5 years"],a:1,e:"Started...ago -> Have learnt... for.",t:"T√¥i ƒë√£ h·ªçc ti·∫øng Anh ƒë∆∞·ª£c 5 nƒÉm."},
      {q:"The flag of the UK is called ______.",o:["The Stars and Stripes","The Union Jack","The Maple Leaf","The Southern Cross"],a:1,e:"Union Jack l√† c·ªù V∆∞∆°ng qu·ªëc Anh.",t:"C·ªù c·ªßa Anh g·ªçi l√† Union Jack."},
      {q:"What time ______ the train leave?",o:["do","does","is","will"],a:1,e:"Hi·ªán t·∫°i ƒë∆°n v·ªõi timetable.",t:"M·∫•y gi·ªù t√†u ch·∫°y?"},
      {q:"I ______ to London three times.",o:["go","went","have gone","have been"],a:3,e:"Have been to (ƒë√£ t·ª´ng ƒë·∫øn v√† v·ªÅ).",t:"T√¥i ƒë√£ ƒë·∫øn Lu√¢n ƒê√¥n 3 l·∫ßn."},
      {q:"Find the mistake: 'She has lived here since 10 years.'",o:["has lived","here","since","years"],a:2,e:"Kho·∫£ng th·ªùi gian d√πng 'for'.",t:"L·ªói sai: since -> for."},
      {q:"Scotland is famous for ______.",o:["kilts","kimonos","ao dai","sari"],a:0,e:"Kilt l√† trang ph·ª•c truy·ªÅn th·ªëng Scotland.",t:"Scotland n·ªïi ti·∫øng v·ªõi v√°y Kilt."},
      {q:"It's only the first week, and I ______ so much.",o:["see","saw","am seeing","have seen"],a:3,e:"Hi·ªán t·∫°i ho√†n th√†nh (tr·∫£i nghi·ªám).",t:"M·ªõi tu·∫ßn ƒë·∫ßu m√† t√¥i ƒë√£ th·∫•y nhi·ªÅu th·ª©."},
      {q:"The capital of the USA is ______.",o:["New York","Washington D.C","Los Angeles","Chicago"],a:1,e:"Washington D.C.",t:"Th·ªß ƒë√¥ n∆∞·ªõc M·ªπ l√† g√¨?"},
      {q:"Can you tell me ______ to the station?",o:["way","the way","a way","ways"],a:1,e:"The way (ƒë∆∞·ªùng ƒëi).",t:"B·∫°n c√≥ th·ªÉ ch·ªâ ƒë∆∞·ªùng ra ga kh√¥ng?"},
      {q:"Stress: A. refugee, B. trainee, C. engineer, D. committee",o:["refugee","trainee","engineer","committee"],a:3,e:"D. com'mittee (2). C√≤n l·∫°i √¢m 3 (ƒëu√¥i ee/eer).",t:"Ch·ªçn t·ª´ tr·ªçng √¢m kh√°c."},
      {q:"The Maori are the indigenous people of ______.",o:["Australia","New Zealand","Canada","USA"],a:1,e:"Ng∆∞·ªùi Maori ·ªü New Zealand.",t:"Ng∆∞·ªùi Maori l√† d√¢n b·∫£n ƒë·ªãa ·ªü ƒë√¢u?"},
      {q:"Present Simple usually implies ______ when talking about timetables.",o:["past","future","present","now"],a:1,e:"Hi·ªán t·∫°i ƒë∆°n ch·ªâ t∆∞∆°ng lai khi n√≥i v·ªÅ l·ªãch tr√¨nh.",t:"Hi·ªán t·∫°i ƒë∆°n th∆∞·ªùng √°m ch·ªâ t∆∞∆°ng lai khi n√≥i v·ªÅ l·ªãch tr√¨nh."},

      // UNIT 9 (61-90)
      {q:"The roof ______ in a storm a few days ago.",o:["damaged","was damaged","has damaged","damage"],a:1,e:"B·ªã ƒë·ªông qu√° kh·ª© ƒë∆°n (was damaged).",t:"M√°i nh√† b·ªã h·ªèng trong b√£o."},
      {q:"Thousands of people ______ by natural disasters every year.",o:["are affected","are affecting","have affected","were affected"],a:0,e:"B·ªã ƒë·ªông hi·ªán t·∫°i ƒë∆°n.",t:"H√†ng ng√†n ng∆∞·ªùi b·ªã ·∫£nh h∆∞·ªüng b·ªüi thi√™n tai."},
      {q:"Pronunciation: Choose the word pronounced differently.",o:["watched","collapsed","caused","laughed"],a:2,e:"caused /d/, c√≤n l·∫°i /t/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"Stress: Choose the word with different stress.",o:["disaster","natural","typhoon","volcano"],a:1,e:"natural √¢m 1, c√≤n l·∫°i √¢m 2.",t:"Ch·ªçn t·ª´ tr·ªçng √¢m kh√°c."},
      {q:"Thousands of buildings ______ by the earthquake last year.",o:["destroyed","were destroyed","was destroyed","have been destroyed"],a:1,e:"B·ªã ƒë·ªông qu√° kh·ª© ƒë∆°n (last year).",t:"H√†ng ng√†n t√≤a nh√† b·ªã ph√° h·ªßy nƒÉm ngo√°i."},
      {q:"Before I woke up, the storm ______.",o:["stopped","had stopped","has stopped","was stopping"],a:1,e:"Qu√° kh·ª© ho√†n th√†nh.",t:"Tr∆∞·ªõc khi t√¥i th·ª©c d·∫≠y, c∆°n b√£o ƒë√£ t·∫°nh."},
      {q:"A violent storm with strong winds moving in a circle is a ______.",o:["flood","drought","cyclone","mudslide"],a:2,e:"Cyclone (l·ªëc xo√°y).",t:"C∆°n b√£o gi√≥ xo√°y l√† l·ªëc xo√°y."},
      {q:"Mount St. Helens, a ______ in the USA, erupted in 1980.",o:["volcano","mountain","hill","lake"],a:0,e:"Volcano v√¨ 'erupted'.",t:"N√∫i St. Helens phun tr√†o nƒÉm 1980."},
      {q:"Passive Rewrite: 'They have repaired the bridge.' -> The bridge ______.",o:["has been repaired","have been repaired","was repaired","is repaired"],a:0,e:"B·ªã ƒë·ªông hi·ªán t·∫°i ho√†n th√†nh.",t:"C√¢y c·∫ßu ƒë√£ ƒë∆∞·ª£c s·ª≠a ch·ªØa."},
      {q:"When a volcano erupts, it sends hot ______ and gas into the sky.",o:["water","ash","snow","ice"],a:1,e:"Ash (tro b·ª•i).",t:"N√∫i l·ª≠a phun tro v√† kh√≠ n√≥ng."},
      {q:"Reading: Earthquake is caused by the collision of the Earth's ______.",o:["inner layers","outer layers","soft layers","hot layers"],a:1,p:"Earthquake is caused by the collision of the Earth's outer layers.",e:"Outer layers.",t:"ƒê·ªông ƒë·∫•t do va ch·∫°m v·ªè ngo√†i Tr√°i ƒê·∫•t."},
      {q:"Reading: How long did the 2004 Indian Ocean earthquake last?",o:["A few seconds","More than 10 minutes","Exactly 1 minute","24 hours"],a:1,p:"...lasted more than 10 minutes.",e:"H∆°n 10 ph√∫t.",t:"Tr·∫≠n ƒë·ªông ƒë·∫•t 2004 k√©o d√†i bao l√¢u?"},
      {q:"Reading: What did the earthquake in 2004 create?",o:["A tornado","A series of tsunamis","A fire","A volcano"],a:1,p:"...creating a series of tsunamis.",e:"Chu·ªói s√≥ng th·∫ßn.",t:"Tr·∫≠n ƒë·ªông ƒë·∫•t t·∫°o ra g√¨?"},
      {q:"Reading: How high were the waves in the 2004 tsunami?",o:["10 meters","20 meters","30 meters","50 meters"],a:2,p:"Waves reached the height of 30 meters.",e:"30 m√©t.",t:"S√≥ng cao bao nhi√™u?"},
      {q:"Reading: How many people were killed in that disaster?",o:["250,000","50,000","100,000","25,000"],a:0,p:"...more than 250,000 people had been killed...",e:"H∆°n 250.000.",t:"S·ªë ng∆∞·ªùi ch·∫øt?"},
      {q:"By the time the rescue team arrived, 50 people ______.",o:["injured","had injured","had been injured","were injured"],a:2,e:"QKHT b·ªã ƒë·ªông.",t:"Khi ƒë·ªôi c·ª©u h·ªô ƒë·∫øn, 50 ng∆∞·ªùi ƒë√£ b·ªã th∆∞∆°ng."},
      {q:"A tornado looks ______ a funnel.",o:["as","like","same","similar"],a:1,e:"Look like.",t:"L·ªëc xo√°y tr√¥ng nh∆∞ c√°i ph·ªÖu."},
      {q:"Hurricane Andrew swept through southern Florida ______ August 1992.",o:["in","on","at","since"],a:0,e:"in + th√°ng/nƒÉm.",t:"B√£o Andrew qu√©t qua Florida v√†o 8/1992."},
      {q:"Find the mistake: 'During an earthquake, you should be away from heavy furnitures.'",o:["During","should be","away from","furnitures"],a:3,e:"Furniture kh√¥ng ƒë·∫øm ƒë∆∞·ª£c.",t:"L·ªói: furnitures."},
      {q:"The earthquake in Kobe in 1995 ______ a large number of people.",o:["killed","was killed","killing","kills"],a:0,e:"QK ƒë∆°n.",t:"ƒê·ªông ƒë·∫•t Kobe 1995 l√†m ch·∫øt nhi·ªÅu ng∆∞·ªùi."},
      {q:"Rewrite: 'The tsunami destroyed the village.' -> The village ______.",o:["destroyed by the tsunami","was destroyed by the tsunami","is destroyed by the tsunami","has been destroyed"],a:1,e:"B·ªã ƒë·ªông QK ƒë∆°n.",t:"Ng√¥i l√†ng b·ªã ph√° h·ªßy b·ªüi s√≥ng th·∫ßn."},
      {q:"When I looked at the river, I knew it ______ for a long time.",o:["was contaminated","contaminated","had been contaminated","has been contaminated"],a:2,e:"QKHT b·ªã ƒë·ªông.",t:"T√¥i bi·∫øt n√≥ ƒë√£ b·ªã √¥ nhi·ªÖm t·ª´ l√¢u."},
      {q:"Many people become ______ due to natural disasters.",o:["homeless","homesick","homework","housewife"],a:0,e:"Homeless.",t:"Nhi·ªÅu ng∆∞·ªùi v√¥ gia c∆∞ do thi√™n tai."},
      {q:"A severe drought causes a lack of ______.",o:["food","water","air","land"],a:1,e:"Drought -> thi·∫øu n∆∞·ªõc.",t:"H·∫°n h√°n g√¢y thi·∫øu n∆∞·ªõc."},
      {q:"The rescue workers ______ trapped people yesterday.",o:["save","saved","have saved","saving"],a:1,e:"yesterday -> QK ƒë∆°n.",t:"Nh√¢n vi√™n c·ª©u h·ªô ƒë√£ c·ª©u ng∆∞·ªùi h√¥m qua."},
      {q:"Passive: 'The storm destroyed the house.' -> The house ______.",o:["was destroyed","is destroyed","has destroyed","destroyed"],a:0,e:"B·ªã ƒë·ªông QK ƒë∆°n.",t:"Ng√¥i nh√† b·ªã b√£o ph√° h·ªßy."},
      {q:"Mudslide often happens after ______.",o:["heavy rain","hot sun","strong wind","snow"],a:0,e:"Sau m∆∞a l·ªõn.",t:"L·ªü ƒë·∫•t x·∫£y ra sau m∆∞a l·ªõn."},
      {q:"Pronunciation: A. thunder, B. erupt, C. trust, D. pull",o:["thunder","erupt","trust","pull"],a:3,e:"pull /u/, c√≤n l·∫°i / å/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"Stress: A. collapse, B. damage, C. forecast, D. rescue",o:["collapse","damage","forecast","rescue"],a:0,e:"collapse √¢m 2, c√≤n l·∫°i √¢m 1.",t:"Ch·ªçn t·ª´ tr·ªçng √¢m kh√°c."},
      {q:"When the earthquake hit, we ______ dinner.",o:["have","had","are having","were having"],a:3,e:"QK ti·∫øp di·ªÖn.",t:"Khi ƒë·ªông ƒë·∫•t x·∫£y ra, ch√∫ng t√¥i ƒëang ƒÉn t·ªëi."},

      // REVIEW (91-100)
      {q:"If I ______ a bird, I would fly.",o:["am","were","was","will be"],a:1,e:"ƒêi·ªÅu ki·ªán lo·∫°i 2: If I were.",t:"N·∫øu t√¥i l√† chim, t√¥i s·∫Ω bay."},
      {q:"Vocabulary: A person who studies the environment is an ______.",o:["environment","environmentalist","engineer","artist"],a:1,e:"Environmentalist.",t:"Ng∆∞·ªùi nghi√™n c·ª©u m√¥i tr∆∞·ªùng."},
      {q:"Which sentence is correct?",o:["If it rain, I stay home.","If it rains, I will stay home.","If it rains, I stayed home.","If it raining, I will stay home."],a:1,e:"C·∫•u tr√∫c ƒë√∫ng lo·∫°i 1.",t:"C√¢u ƒë√∫ng: N·∫øu m∆∞a, t√¥i s·∫Ω ·ªü nh√†."},
      {q:"Pronunciation: Choose the word pronounced differently.",o:["flood","moon","food","cool"],a:0,e:"flood / å/, c√≤n l·∫°i /u:/.",t:"Ch·ªçn t·ª´ ph√°t √¢m kh√°c."},
      {q:"By the time we got home, the rain ______.",o:["stopped","stops","has stopped","had stopped"],a:3,e:"QKHT.",t:"Khi v·ªÅ nh√†, m∆∞a ƒë√£ t·∫°nh."},
      {q:"Reuse, Reduce, and ______.",o:["Remake","Recycle","Remove","Repeat"],a:1,e:"3R: Reuse, Reduce, Recycle.",t:"T√°i s·ª≠ d·ª•ng, Ti·∫øt gi·∫£m, T√°i ch·∫ø."},
      {q:"Find the mistake: 'I haven't seen him since 5 years.'",o:["haven't seen","him","since","years"],a:2,e:"Kho·∫£ng th·ªùi gian d√πng 'for'.",t:"L·ªói: since -> for."},
      {q:"We should use ______ bags instead of plastic bags.",o:["paper","glass","cloth","sand"],a:2,e:"Cloth bags.",t:"N√™n d√πng t√∫i v·∫£i thay t√∫i nh·ª±a."},
      {q:"Rewrite: 'Why don't we go to the cinema?' -> ______.",o:["Let's go to the cinema.","We must go to the cinema.","Going to the cinema?","We will go to the cinema."],a:0,e:"Why don't we = Let's.",t:"Ch√∫ng ta ƒëi xem phim nh√©?"},
      {q:"Find the mistake: 'He said he is coming tomorrow.'",o:["said","is","coming","tomorrow"],a:1,e:"C√¢u gi√°n ti·∫øp ph·∫£i l√πi th√¨: is -> was.",t:"L·ªói: is."}
    ];

    // =========================
    // 2) WEB AUDIO (CHU·∫®N MOBILE)
    // =========================
    let audioCtx = null;
    let isMusicPlaying = false;
    let nextNoteTime = 0;
    let noteIndex = 0;
    let rafId = null;
    let unlocked = false;

    const freq = {
      'C4':261.63,'D4':293.66,'E4':329.63,'G4':392.00,'A4':440.00,
      'C5':523.25,'D5':587.33,'E5':659.25,'G5':783.99,'A5':880.00
    };

    const melody = [
      {n:'E5',d:0.5},{n:'G5',d:0.5},{n:'A5',d:1.0},
      {n:'G5',d:0.5},{n:'E5',d:0.5},{n:'D5',d:1.0},
      {n:'C5',d:0.5},{n:'D5',d:0.5},{n:'E5',d:0.5},{n:'G5',d:0.5},
      {n:'A5',d:1.0},{n:'G5',d:1.0},
      {n:'E5',d:0.5},{n:'D5',d:0.5},{n:'C5',d:1.0},
      {n:null,d:1.0}
    ];

    function ensureAudioContext(){
      if(!audioCtx){
        const AC = window.AudioContext || window.webkitAudioContext;
        audioCtx = new AC();
      }
      return audioCtx;
    }

    async function unlockAudio(){
      try{
        const ctx = ensureAudioContext();
        if(ctx.state === 'suspended') await ctx.resume();

        // "ƒë√°nh ti·∫øng" r·∫•t nh·ªè ƒë·ªÉ iOS/Chrome m·ªü kh√≥a audio
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        gain.gain.value = 0.0001;
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        osc.stop(ctx.currentTime + 0.02);

        unlocked = true;
      }catch(e){
        // kh√¥ng sao, s·∫Ω m·ªü khi c√≥ t∆∞∆°ng t√°c ti·∫øp theo
      }
    }

    function updateMusicButtonUI(){
      const btn = ui.musicBtn;
      if(isMusicPlaying) btn.classList.add('music-playing');
      else btn.classList.remove('music-playing');
    }

    function playTone(f, duration, time){
      if(!f || !audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'sine';
      osc.frequency.value = f;

      gain.gain.setValueAtTime(0, time);
      gain.gain.linearRampToValueAtTime(0.15, time + 0.06);
      gain.gain.exponentialRampToValueAtTime(0.001, time + duration);

      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start(time);
      osc.stop(time + duration);
    }

    function scheduler(){
      if(!audioCtx) return;

      while(nextNoteTime < audioCtx.currentTime + 0.12){
        if(isMusicPlaying){
          const note = melody[noteIndex];
          if(note.n) playTone(freq[note.n], note.d, nextNoteTime);
          nextNoteTime += note.d;
          noteIndex = (noteIndex + 1) % melody.length;
        }else{
          nextNoteTime += 0.12;
        }
      }
      rafId = requestAnimationFrame(scheduler);
    }

    function startMusicEngine(){
      ensureAudioContext();
      if(!rafId){
        nextNoteTime = audioCtx.currentTime + 0.05;
        scheduler();
      }
    }

    function stopMusicEngine(){
      if(rafId){
        cancelAnimationFrame(rafId);
        rafId = null;
      }
    }

    function playSFX(correct){
      if(!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);

      if(correct){
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(880, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1760, audioCtx.currentTime + 0.1);
        gain.gain.setValueAtTime(0.12, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.5);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.5);
      }else{
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(180, audioCtx.currentTime);
        osc.frequency.linearRampToValueAtTime(90, audioCtx.currentTime + 0.25);
        gain.gain.setValueAtTime(0.12, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.25);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.25);
      }
    }

    // M·ªü kh√≥a audio b·∫±ng tap/keypress ƒë·∫ßu ti√™n (b·ªï tr·ª£ iOS/Android)
    function setupGlobalUnlock(){
      const handler = async () => {
        await unlockAudio();
        document.removeEventListener('pointerdown', handler);
        document.removeEventListener('touchstart', handler);
        document.removeEventListener('keydown', handler);
      };
      document.addEventListener('pointerdown', handler, {passive:true});
      document.addEventListener('touchstart', handler, {passive:true});
      document.addEventListener('keydown', handler);
    }

    // Resume audio khi quay l·∫°i tab/app
    document.addEventListener('visibilitychange', async () => {
      if(!audioCtx) return;
      if(document.visibilityState === 'visible' && isMusicPlaying && audioCtx.state === 'suspended'){
        try{ await audioCtx.resume(); }catch(e){}
      }
    });

    // =========================
    // 3) UI + GAME LOGIC
    // =========================
    const ui = {
      start: document.getElementById('start-screen'),
      startBtn: document.getElementById('start-btn'),
      qLabel: document.getElementById('lbl-q'),
      totalLabel: document.getElementById('lbl-total'),
      scoreLabel: document.getElementById('lbl-score'),
      passage: document.getElementById('passage'),
      question: document.getElementById('question'),
      options: document.getElementById('options'),
      feedback: document.getElementById('feedback'),
      msg: document.getElementById('fb-msg'),
      exp: document.getElementById('fb-exp'),
      trans: document.getElementById('fb-trans'),
      nextBtn: document.getElementById('btn-next'),
      musicBtn: document.getElementById('btn-music')
    };

    ui.totalLabel.textContent = questions.length;

    // Hoa r∆°i
    const flowers = ['üå∏','üåº','üßß','üçÉ'];
    const fContainer = document.getElementById('flower-container');
    for(let i=0;i<30;i++){
      const el = document.createElement('div');
      el.className = 'flower';
      el.textContent = flowers[Math.floor(Math.random()*flowers.length)];
      el.style.left = Math.random()*100 + 'vw';
      el.style.animationDuration = (Math.random()*5 + 5) + 's';
      el.style.animationDelay = Math.random()*5 + 's';
      el.style.fontSize = (Math.random()*20 + 15) + 'px';
      fContainer.appendChild(el);
    }

    let curIdx = 0;
    let score = 0;

    setupGlobalUnlock();

    ui.startBtn.addEventListener('click', initGame);
    ui.musicBtn.addEventListener('click', toggleMusic);
    ui.nextBtn.addEventListener('click', nextQuestion);

    async function initGame(){
      await unlockAudio();           // unlock audio b·∫±ng thao t√°c b·∫•m B·∫ÆT ƒê·∫¶U
      ensureAudioContext();

      isMusicPlaying = true;         // b·∫≠t nh·∫°c m·∫∑c ƒë·ªãnh sau khi b·∫•m B·∫ÆT ƒê·∫¶U
      updateMusicButtonUI();
      startMusicEngine();

      ui.start.style.display = 'none';
      loadQuestion();
    }

    async function toggleMusic(){
      ensureAudioContext();
      await unlockAudio();
      isMusicPlaying = !isMusicPlaying;
      updateMusicButtonUI();
      if(isMusicPlaying){
        if(audioCtx.state === 'suspended') { try{ await audioCtx.resume(); }catch(e){} }
        startMusicEngine();
      }
    }

    function loadQuestion(){
      ui.feedback.style.display = 'none';
      ui.nextBtn.style.display = 'none';
      ui.options.innerHTML = '';

      const q = questions[curIdx];
      ui.qLabel.textContent = curIdx + 1;

      if(q.p){
        ui.passage.style.display = 'block';
        ui.passage.innerHTML = `<strong>üìñ B√†i ƒë·ªçc:</strong><br>${q.p}`;
      }else{
        ui.passage.style.display = 'none';
      }

      ui.question.textContent = q.q;

      q.o.forEach((opt, idx) => {
        const btn = document.createElement('div');
        btn.className = 'opt-btn';
        btn.textContent = opt;
        btn.onclick = async () => {
          await unlockAudio(); // ƒë·∫£m b·∫£o SFX c√≥ ti·∫øng tr√™n mobile
          check(idx, btn);
        };
        ui.options.appendChild(btn);
      });
    }

    function check(idx, btn){
      const q = questions[curIdx];
      const btns = document.querySelectorAll('.opt-btn');
      btns.forEach(b => b.classList.add('disabled'));

      if(idx === q.a){
        btn.classList.add('correct');
        score += 10;
        ui.scoreLabel.textContent = score;
        playSFX(true);
        showFeedback(true, q);
      }else{
        btn.classList.add('wrong');
        btns[q.a].classList.add('correct');
        playSFX(false);
        showFeedback(false, q);
      }

      if(curIdx < questions.length - 1){
        ui.nextBtn.style.display = 'block';
        ui.nextBtn.textContent = "C√¢u Ti·∫øp Theo ‚ûú";
      }else{
        ui.nextBtn.style.display = 'block';
        ui.nextBtn.textContent = "K·∫æT TH√öC";
        ui.nextBtn.onclick = endGame;
      }
    }

    function showFeedback(correct, q){
      ui.feedback.style.display = 'block';
      ui.feedback.style.background = correct ? '#d1e7dd' : '#f8d7da';
      ui.msg.textContent = correct ? "üéâ CH√çNH X√ÅC!" : "üò¢ SAI R·ªíI!";
      ui.msg.style.color = correct ? '#0f5132' : '#842029';
      ui.exp.innerHTML = `<strong>Gi·∫£i th√≠ch:</strong> ${q.e}`;
      ui.trans.innerHTML = `<strong>D·ªãch:</strong> ${q.t}`;
    }

    function nextQuestion(){
      curIdx++;
      loadQuestion();
    }

    function endGame(){
      stopMusicEngine();
      document.querySelector('.game-container').innerHTML = `
        <div style="text-align:center; padding: 40px;">
          <h1 style="font-size:3.5rem; font-family:'Pangolin'; color:var(--red)">K·∫æT QU·∫¢</h1>
          <p style="font-size:1.5rem; margin:20px 0;">T·ªïng ƒëi·ªÉm:
            <span style="color:var(--yellow); font-weight:bold; font-size:3rem; text-shadow:1px 1px 0 #000">${score}</span>
          </p>
          <p style="font-style:italic; color:#555">Ch√∫c m·ª´ng nƒÉm m·ªõi! H·ªçc gi·ªèi chƒÉm ngoan nh√©! üå∏</p>
          <button class="next-btn" style="display:inline-block; margin-top:30px;" onclick="location.reload()">L√†m L·∫°i</button>
        </div>
      `;
    }
  </script>
</body>
</html>
